# Repository Guidelines

## Project Structure & Module Organization
- `apps/web`: Next.js 15 (App Router). Key folders: `app/` (routes), `components/` (UI, PascalCase), `lib/` (utilities), `data/` (mock data), `config/`, `public/`.
- `apps/cms`: Strapi project (generated by Docker at first run). Treat as app code, not vendor.
- `packages/config`: Shared config (if/when referenced).
- `docs/`: Internal documentation and tasks. Root configs: `.editorconfig`, `docker-compose.yml`.
 - Assets: `apps/web/public/hero.avif` (Hero) y `apps/web/public/CTA.avif` (CTA final).

## Build, Test, and Development Commands
- Web app (from `apps/web`):
  - `npm run dev` — Start Next.js on `http://localhost:3000`.
  - `npm run build` — Production build.
  - `npm start` — Run built app.
  - `npm run lint` — ESLint (`next/core-web-vitals`, TypeScript).
- CMS + DB (from repo root):
  - `cp .env.example .env && docker compose up -d` — Boot Postgres + Strapi at `http://localhost:1337`.

## UI Conventions
- Hero: `next/image` con `priority` + blur; título Poppins 500; overlay `from-black/60 via-black/40 to-black/20`.
- SearchBar: panel translúcido con blur, ancho `md:w-[62%]`, en móvil va tras el Hero; botón “Buscar” compacto.
- Grid: 1× (mobile), 2× (sm), 4× (lg); 12 cards visibles.
- PropertyCard: fotos `aspect-square`, fallback de imagen onError; cinta “Vendido” y `tag` opcional.

## Coding Style & Naming Conventions
- Formatting: 2 spaces, LF, trim trailing whitespace (`.editorconfig`).
- TypeScript: strict mode; prefer explicit types for public APIs.
- React/Next: components in PascalCase (`components/Hero.tsx`), utilities camelCase (`lib/formatPrice.ts`). Use `next/image`, `next/link`.
- Styling: Tailwind CSS v4; prefer utility-first classes over ad-hoc CSS.
- Imports: `@/*` path alias available in `apps/web`.

## Data & Messaging
- Títulos de propiedades: no incluir `H/B`; se permite “• N m²” pero se limpia en UI con `cleanTitle`.
- UI muestra specs legibles: “2 habs • 2 baños • 95 m²”.
- WhatsApp usa formato corto H/B con helpers `toHBFromParts` + `waLink`.

## Testing Guidelines
- No formal test runner configured yet. When adding tests:
  - Unit: place in `apps/web/__tests__`, name `*.test.ts(x)`.
  - E2E: Playwright/Cypress may be added later; colocate under `apps/web/e2e`.
- For UI changes, include manual verification steps (route touched, expected states, edge cases).

## Commit & Release Flow (solo dev)
- Commits: Conventional Commits con scope, p. ej., `feat(web): listado`, `fix(cms): relación Lead`, `chore(style): tokens Tailwind`.
- Ramas: corta duración (`git switch -c feat/x`), merge directo a `main`.
- Pre-push: `cd apps/web && npm run lint && npm run build`.
- PRs opcionales: abrir Draft solo para cambios grandes con 2–3 bullets y capturas.
- Releases: tag y push — `git tag -a v0.1.0 -m "MVP" && git push --tags`; resume en `NOTES.md`.

Release checklist
- Build OK y rutas clave renderizan: `/`, `/properties`, detalle por slug, `/blog`.
- `.env.example` actualizado si hay nuevas vars.
- Respalda `./postgres-data` y `./apps/cms` antes de cambios en Strapi/DB.
- Documenta breaking changes en `technical-specifications.md`.

## Security & Configuration Tips
- Never commit secrets. Use `.env` (based on `.env.example`).
- Strapi keys (`APP_KEYS`, `JWT_SECRET`, etc.) are for local dev; rotate for deployments.
- Local data persists in `./postgres-data` and `./apps/cms` (Docker volumes/binds).
